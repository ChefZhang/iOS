# 字典转模型

功能演示：

![数组字典的运用.gif](http://upload-images.jianshu.io/upload_images/328309-d6ef96cf2adb292b.gif?imageMogr2/auto-orient/strip)

* 需求分析
    * 点击添加按钮，增加图片和文字描述，并且文字对应图片
    * 每个图片都不同，文字也不同

```objc
#import "ViewController.h"

/** 水平间距 */
#define xMargin 20
/** 垂直间距 */
#define yMargin 20
/** 包的图片大小 */
#define imageWSize 70
/** 包的图片大小 */
#define imageHSize 90
// 标签高度
#define labelHeight 20

@interface ViewController ()

/** 添加按钮 */
@property (nonatomic, weak) UIButton *addBtn;
/** 删除按钮 */
@property (nonatomic, strong) UIButton *delBtn;
/** 购物车视图 */
@property (nonatomic, strong) UIView *shopcarView;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    
    // 视图中添加添加按钮
    UIButton *addBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    addBtn.frame = CGRectMake(40, 80, 60, 60);
    [addBtn setBackgroundImage:[UIImage imageNamed:@"add"] forState:UIControlStateNormal];
    [addBtn setBackgroundImage:[UIImage imageNamed:@"add_highlighted"] forState:UIControlStateHighlighted];
    [addBtn setBackgroundImage:[UIImage imageNamed:@"add_disabled"] forState:UIControlStateDisabled];
    
    self.addBtn = addBtn;
    [self.view addSubview:addBtn];
    [self.addBtn addTarget:self action:@selector(addBtnClick) forControlEvents:UIControlEventTouchUpInside];
    
    // 视图中添加删除按钮
    UIButton *delBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    delBtn.frame = CGRectMake(275, 80, 60, 60);
    [delBtn setBackgroundImage:[UIImage imageNamed:@"remove"] forState:UIControlStateNormal];
    [delBtn setBackgroundImage:[UIImage imageNamed:@"remove_highlighted"] forState:UIControlStateHighlighted];
    [delBtn setBackgroundImage:[UIImage imageNamed:@"remove_disabled"] forState:UIControlStateDisabled];
    
    delBtn.enabled = NO;
    
    self.delBtn = delBtn;
    [self.view addSubview:delBtn];
    [self.delBtn addTarget:self action:@selector(delBtnClick) forControlEvents:UIControlEventTouchUpInside];
    
    // 试图中添加购物车view
    UIView *shopcarView = [[UIView alloc] initWithFrame:CGRectMake(40, 160, 295, 240)];
    shopcarView.backgroundColor = [UIColor purpleColor];
    
    self.shopcarView = shopcarView;
    [self.view addSubview:shopcarView];
    
    
}

- (void)addBtnClick{
    // 确定在哪一行
    NSInteger row = self.shopcarView.subviews.count / 3;
    // 确定列数
    NSInteger column = self.shopcarView.subviews.count % 3;
    
    UIView *tempView = [[UIView alloc] init];
    tempView.frame = CGRectMake(xMargin + (xMargin+imageWSize) * column, yMargin + (yMargin+imageHSize) * row, imageWSize, imageHSize);
    tempView.backgroundColor = [UIColor greenColor];
    
    [self.shopcarView addSubview:tempView];
    
    // label和imageView中的图片是一一对应的关系，这个时候，就想起了字典，但是字典只能存放一组数据
    // oc中的数组可以存放多种不同数据类型
    NSArray<NSDictionary *> *dataArr = @[
                                         @{@"name":@"单肩包", @"icon":@"danjianbao"},
                                         @{@"name":@"钱包", @"icon":@"qianbao"},
                                         @{@"name":@"链条包", @"icon":@"liantiaobao"},
                                         @{@"name":@"手提包", @"icon":@"shoutibao"},
                                         @{@"name":@"双肩包", @"icon":@"shuangjianbao"},
                                         @{@"name":@"斜挎包", @"icon":@"xiekuabao"}
                                         ];
    // 取出数组中的字典
    NSDictionary *dict = dataArr[self.shopcarView.subviews.count-1];
    
    // 在子视图中添加iamgeView
    UIImageView *tempImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, imageWSize, imageHSize-labelHeight)];
    tempImageView.backgroundColor = [UIColor yellowColor];
    
    // 这么写，永远只能出现同样的照片
//    tempImageView.image = [UIImage imageNamed:@"qianbao"];
    tempImageView.image = [UIImage imageNamed:dict[@"icon"]];
    
    [tempView addSubview:tempImageView];
    
    // 在子视图中添加label
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, imageWSize, imageWSize, labelHeight)];
    
    // 这么写，永远只能出现同样的文字
//    label.text = @"你好";
    label.text = dict[@"name"];
    
    label.textAlignment = NSTextAlignmentCenter;
    label.backgroundColor = [UIColor grayColor];
    
    [tempImageView addSubview:label];
    
    
    if (self.shopcarView.subviews.count == 6) {
        self.addBtn.enabled = NO;
    }
    self.delBtn.enabled = YES;
}

- (void)delBtnClick{
    UIView *tempView = [self.shopcarView.subviews lastObject];
    [tempView removeFromSuperview];
    
    if (self.shopcarView.subviews.count == 0) {
        self.delBtn.enabled = NO;
    }
    
    self.addBtn.enabled = YES;

}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end
```
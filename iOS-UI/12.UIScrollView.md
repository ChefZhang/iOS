# 12.UIScrollView

### 本节知识点

- UIScrollView的常见属性
- UIScrollView的常用代理方法
- UIScrollView的缩放
- UIScrollView和UIPageControl的分页
- NSTimer的使用

##### 1.什么是UIScrollView

移动设备的屏幕大小是极其有限的，因此直接展示在用户眼前的内容也相当有限

当展示的内容较多，超出一个屏幕时，用户可通过滚动手势来查看屏幕以外的内容

普通的UIView不具备滚动功能，不适合显示过多的内容

UIScrollView是一个能够滚动的视图控件，可以用来展示大量的内容，并且可以通过滚动查看所有的内容

举例：手机上的“设置”


##### 2.UIScrollView的基本使用
- UIScrollView的用法很简单
	+ 将需要展示的内容添加到UIScrollView中
	+ 设置UIScrollView的contentSize属性，告诉UIScrollView所有内容的尺寸，也就是告诉它滚动的范围（能滚多远，滚到哪里是尽头）
	```objc
	// 1.创建UIScrollView
    UIScrollView *scrollView = [[UIScrollView alloc] init];
    scrollView.frame = CGRectMake(35, 120, 300, 200);
    scrollView.backgroundColor = [UIColor greenColor];
    [self.view addSubview:scrollView];
    
    // 2.在scrollView上添加imageView
    UIImage *image = [UIImage imageNamed:@"minion"];
    // 将整个image的原始尺寸添加到imageView中, 我的图片大小是510*510
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    [scrollView addSubview:imageView];
	```
	

- UIScrollView显示内容的小细节
	+ 超出UIScrollView边框的内容会被自动隐藏(clipsToBounds)
	+ 用户可以用过手势拖动来查看超出边框并被隐藏的内容
	```objc
	// clipsToBounds是UIView的属性,UIScrollView是继承自UIView的,默认是剪裁
    scrollView.clipsToBounds = NO;
	```
- UIScrollView无法滚动的解决办法
	+ 如果UIScrollView无法滚动，可能是以下原因：
	+ 没有设置contentSize
	+ scrollEnabled = NO; // 单纯不能滚动，但是可以监听点击
	+ 没有接收到触摸事件:userInteractionEnabled = NO; // 所有的用户操作都不能响应的，userInteractionEnabled是UIView的属性
	+ … …

##### 3.UIScrollView的常见属性

- @property(nonatomic) CGPoint contentOffset; 
	+ 这个属性用来表示UIScrollView滚动的位置（其实就是内容左上角与scrollView左上角的间距值）


- @property(nonatomic) CGSize contentSize; 
	+ 这个属性用来表示UIScrollView内容的尺寸，滚动范围（能滚多远）


- @property(nonatomic) UIEdgeInsets contentInset; 
	+ 这个属性能够在UIScrollView的4周增加额外的滚动区域，一般用来避免scrollView的内容被其他控件挡住


- @property(nonatomic) BOOL bounces;
	+ 设置UIScrollView是否需要弹簧效果,默认是YES

	
- scrollView和contentSize的关系
![UIScrollView和contentSize的关系.png](http://upload-images.jianshu.io/upload_images/328309-0497bf41f6fc020a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- contentSize,contentOffSet和contentInset图解
![Pasted Graphic 21.png](http://upload-images.jianshu.io/upload_images/328309-d4ce181f84bb5d81.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


- @property(nonatomic,getter=isScrollEnabled) BOOL scrollEnabled; 
	+ 设置UIScrollView是否能滚动,默认是YES


- @property(nonatomic) BOOL showsHorizontalScrollIndicator;
	+ 是否显示水平滚动条,默认是YES
	```objc
	self.scrollView.showHorizontalScrollIndicator = NO; // 不显示水平滚动条
	self.scrollView.showVerticalScrollIndicator = NO; // 不现实垂直滚动条
    ```

- @property(nonatomic) BOOL showsVerticalScrollIndicator;
	+ 是否显示垂直滚动条,默认是YES


- @property(nonatomic) BOOL alwaysBounceVertical;
	+ // default NO. if YES and bounces is YES, even if content is smaller than bounds, allow drag vertically
	+ 用户下拉刷新,例如微博下拉刷新 


- @property(nonatomic) BOOL alwaysBounceHorizontal;         
 	+ // default NO. if YES and bounces is YES, even if content is smaller than bounds, allow drag horizontally 
 	+ 这个always貌似没有用，但是实际上经常用到
	+ 下拉刷新就会用到，然后“小菊花”刷新
	+ 这样就可以拉出小菊花了，但是一定要播放动画，不然没有小菊花
![alwaysBounceVertical的运用.png](http://upload-images.jianshu.io/upload_images/328309-21b969c760b4b030.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


- 注意:
	+ 用storyboard创建的UIScrollView时,self.view.subviews中会有三个子控件,一个是UIScrollView,另外两个是垂直滚动条和水平滚动条,所以取子控件的时候,千万不要用索引,例如*[self.view.subviews firstObject];*
	+ 用代码创建的话,在viewDidLoad中,一开始是只有UIScrollView
	+ 如果真的要获取的话，需要把滚动条隐藏，这样就行了
	
##### 4.contentOffset
- contentOffset 初始时候的内容偏移量
	+ 作用1.设置内容偏移量(setter方法)
	+ 作用2.获取当前的偏移量(getter方法)	
	+ 偏移量的计算（scrollView的x - contentSize的x，就是scrollView的左上角-contentSize的左上角,即scrollView的左上角-contentSize的左上角）
	![偏移量的计算1.png](http://upload-images.jianshu.io/upload_images/328309-5850712d9d1105a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	![偏移量的计算2.png](http://upload-images.jianshu.io/upload_images/328309-3f38694426ea798b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![偏移量的计算3.png](http://upload-images.jianshu.io/upload_images/328309-c22016c2f44cbcdb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 内容补充:
	+ 点击控制器的空白部分，会自动调用这个方法
	![touchesBegan.png](http://upload-images.jianshu.io/upload_images/328309-6bfd763a6b86cbd4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

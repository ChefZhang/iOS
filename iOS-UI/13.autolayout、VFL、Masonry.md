# 13.autolayout、VFL、Masonry

### 题记:自从苹果发布了iPhone5,iOS程序猿就进入了一个新纪元---屏幕适配

##### 1.屏幕适配
- iPhone的尺寸
	+ 3.5inch、4.0inch、4.7inch、5.5inch


- iPad的尺寸
	+ 7.9inch、9.7inch、12.9inch


- 屏幕方向
	+ 竖屏
	+ 横屏

##### 2.点和像素

- 用户眼中
	+ 屏幕是由无数个像素组成的
	+ 像素越多,屏幕越清晰


- 在开发者眼中
	+ 屏幕是由无数个点组成的点又是由像素组成的
	+ 像素越多,屏幕越清晰
	
![像素和点.png](http://upload-images.jianshu.io/upload_images/328309-af7864d15b06a3ab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)	 	
- 设备分辨率
![设备分辨率.png](http://upload-images.jianshu.io/upload_images/328309-ae856d5cc3f53632.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

##### 3.简介(屏幕适配发展史)
- 在以前的iOS程序中，是如何布局UI界面的？
- 写固定值-> autoresizingMask -> autolayout-> sizeClasses
	+ iPhone1-iPhone4s时代 屏幕的尺寸固定为(320,480) ,我们只需要简单计算一下相对位置就好了
	+ iphone5-iphone5s时代屏幕的尺寸变了(320,568) 这时AutoresizingMask派上了用场(为什么不用Autolayout? 因为还要支持ios5) 
	+ iphone6时代 屏幕的宽度也发生了变化,终于是时候抛弃AutoresizingMask改用Autolayout了(1.不用支持ios5了 2. 相对于屏幕适配的多样性来说autoresizingMask也已经过时了)

**注意:在storyboard中,已经包含了auto layout,sizeClassed,autoResizing
auto layout和autoResizing是冲突的
sizeClassed是基于auto layout的**

##### 4.autoresizing(了解即可,现在用的不是很多)

- 关闭autolayout,同时关闭sizeclasses

![关闭autolayout.png](http://upload-images.jianshu.io/upload_images/328309-0bcad1ef42d15acb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![resizing的设置.png](http://upload-images.jianshu.io/upload_images/328309-e90ca462d8d2061c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


- 红色圈点起来的表示与父控件的关系(autoresizing的局限性就是只能用于父子控件,兄弟控件的关系就不能处理了,实际开发中,兄弟控件的关系应用很多)
	+ 与父控件的右边距离永远固定
	+ 与父控件的底部距离永远固定
	+ 做屏幕适配时,不要去每个都在模拟器上运行,有个预览功能,进入后,左下角有个"+",里面添加不同尺寸的iPhone就行了
	![界面预览.png](http://upload-images.jianshu.io/upload_images/328309-71213c29b5b1cbb2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- autoresizing总结
```objc
在Autolayout之前，有Autoresizing可以作屏幕适配，但局限性较大，有些任务根本无法完成(Autoresizing只能设置自身和父控件之间的关系)
Autoresizing仅仅能解决子控件和父控件之间的相对关系问题
相比之下，Autolayout的功能比Autoresizing强大很多
Autolayout解决任何控件之间的相对关系问题
```		

	
##### 5.什么是Autolayout

- Autolayout是一种“自动布局”技术，专门用来布局UI界面的
- Autolayout自iOS 6开始引入，由于Xcode 4的不给力，当时并没有得到很大推广
- 自iOS 7（Xcode 5）开始，Autolayout的开发效率得到很大的提升
- 苹果官方也推荐开发者尽量使用Autolayout来布局UI界面
- Autolayout能很轻松地解决屏幕适配的问题
- autolayout的核心
- **忘记frame,拥抱autolayout**(不过本质还是转成frame)
```objc
Autolayout的2个核心概念
约束:通过给控件添加约束,来决定控件的位置和尺寸
参照:在添加约束时,是依照谁来添加(可以是父控件或者兄弟控件)
```

##### 6.autolayout的警告和错误

- 警告
	+ 控件的frame不匹配所添加的约束, 比如
		- 比如约束控件的宽度为100, 而控件现在的宽度是110


- 错误
	+ 缺乏必要的约束, 比如
		- 只约束了宽度和高度, 没有约束具体的位置
	+ 两个约束冲突, 比如
		- 1个约束控件的宽度为100, 1个约束控件的宽度为110


##### 7.autolayout在storyboard中的使用
- 暂时只要关注后面三个就行
![autolayout在storyboard中的使用.png](http://upload-images.jianshu.io/upload_images/328309-3771f8d99c128529.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 第三个是设置距离四周的距离,还有width和height
![需要关闭.png](http://upload-images.jianshu.io/upload_images/328309-1b78c02f1c2cd605.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 第四个是更新设置以及清楚约束
![第四个.png](http://upload-images.jianshu.io/upload_images/328309-87adffc24b753993.png)

- 注意:点击了添加约束后,不要傻乎乎的又再次添加,应该要清掉之前的约束
	+ 上面的是对选中的控件做操作,下面的是对屏幕上所有的控件,千万不要手贱点错,哭了别怪我哦
![清楚约束.png](http://upload-images.jianshu.io/upload_images/328309-f6e4a2335090adb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 也可以创建约束的时候就更新
	+ constrain那个勾去掉,苹果默认帮你弄出距离左右边框20
![创建出来就更新.png](http://upload-images.jianshu.io/upload_images/328309-d68f93c23005aaef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 距离上下左右距离的时候,可以选择参照物
![选择参照物.png](http://upload-images.jianshu.io/upload_images/328309-1481b9dd3caf3453.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 修改约束
![修改约束.png](http://upload-images.jianshu.io/upload_images/328309-fdfc6fd9ceda303d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 约束里面的修改
![约束的设置.png](http://upload-images.jianshu.io/upload_images/328309-20bc1a0d314edf13.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- bottom layout和bottom layout
![bottom和top.png](http://upload-images.jianshu.io/upload_images/328309-4cff58c97e4f3ed0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 两个兄弟控件的一些操作
	+ 红色和绿色(注意,要让绿色跟红色在水平或者垂直有一点交集)
	![红色和绿色1.png](http://upload-images.jianshu.io/upload_images/328309-16281644c7e8be96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	+ 第二个按钮的设置(一定要有多个控件,不然没有只有最底部两个可以选择)
	![第二个设置.png](http://upload-images.jianshu.io/upload_images/328309-7d125acd20cf14db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	+ 红色和蓝色等宽等高(图中标记错了,应该是第二个,不是第三个)
	![等宽等高1.png](http://upload-images.jianshu.io/upload_images/328309-712597de8f2b20cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	+ 还可以拖线,按住control键
	![等宽等高2.png](http://upload-images.jianshu.io/upload_images/328309-499f897d813e050f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	+ 如果想让红色是蓝色宽度的一半,那就要先设置等宽,然后进到约束里面去修改了
	![宽度一半.png](http://upload-images.jianshu.io/upload_images/328309-02074fb6d333f2cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	+ 对齐设置(leading是头对齐,trailing是尾对齐)
	![对齐.png](http://upload-images.jianshu.io/upload_images/328309-0981dac5dcadd1a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


- 有了autolayout的UILabel
![在layout中的UILabel.png](http://upload-images.jianshu.io/upload_images/328309-450e24c4b562a3e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	+ UILabel的label.numberOfLines= 0; 
	+ 在autolayout中只需要设置x,y,width
	+ 同时要修改width的约束(这样才会不满足的收缩回去)
	![label的设置.png](http://upload-images.jianshu.io/upload_images/328309-360228d1766382c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
	![点击label改变.gif](http://upload-images.jianshu.io/upload_images/328309-0193061ad2a86ecc.gif?imageMogr2/auto-orient/strip)
	

##### 8.autolayout在代码中的使用
	
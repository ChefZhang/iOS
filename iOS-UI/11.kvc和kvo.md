# 11. kvc和kvo

### 1.kvc

##### 什么是kvc

- kvc：key value coding（键值编码）
- 常用于取值和赋值，可以用来做一些字典转模型的操作
- kvc赋值

```objc
[person setValue:@"李四" forKey:@"name"];
```

```objc
/**
 *  利用KVC进行简单赋值
 */
void test(){
    XMGPerson *person = [[XMGPerson alloc] init];
    // 常规赋值
    /*
     person.name = @"张三";
     person.age = 18;
     */
    
    // KVC赋值
    [person setValue:@"王五" forKey:@"name"];
    [person setValue:@"19" forKeyPath:@"money"]; // 自动类型转换
    
    NSLog(@"%@-----%.2f", person.name, person.money);
}
```

- 利用KVC进行综合赋值

```objc
void test2(){
    XMGPerson *person = [[XMGPerson alloc] init];
    person.dog = [[XMGDog alloc] init];
    //        person.dog.name = @"旺财";
    
    // KVC赋值
    /*
     forKey和forKeyPath
     1>forKeyPath 包含了所有 forKey 的功能
     2>forKeyPath 进行内部的点语法,层层访问内部的属性
     3>注意: key值一定要在属性中找到
     */
    // 两句话的作用一样
    // [person.dog setValue:@"阿黄" forKey:@"name"];
    [person setValue:@"旺财" forKeyPath:@"dog.name"];
    
    NSLog(@"%@", person.dog.name);

}
```

- 利用KVC修改类的私有成员变量(UIPageControl)

```objc
_age是在.m文件中声明的

/**
 *  利用KVC修改类的私有成员变量(UIPageControl)
 */
void test3(){
    XMGPerson *person = [[XMGPerson alloc] init];
    //        person->_age
    // 利用KVC修改类的私有成员变量
    [person printAge];
    // 如果下面的_age写成age也没事，kvc自动遍历下划线的和不带下划线的属性，但是一定要有这个属性
    [person setValue:@"88" forKeyPath:@"_age"]; // age _age
    [person printAge];
}
```

- 小结：
    + 在kvc面前，所有东西，都是透明的，可修改的
    + **key值一定要在属性中找到**

